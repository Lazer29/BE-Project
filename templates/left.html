<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0" />
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="cache-control" content="no-cache" />
    <meta http-equiv="pragma" content="no-cache" />
    <title>Fingerspelling with Machine Learning</title>

    <meta name="format-detection" content="telephone=no" />
    <meta name="description"
        content="Fingerspelling.xyz uses your webcam and machine learning to analyze your hand shapes so you can learn to sign the American Sign Language alphabet." />

    <meta property="og:title" content="Fingerspelling with Machine Learning" />
    <meta property="og:site_name" content="Fingerspelling with Machine Learning" />
    <meta property="og:url" content="https://fingerspelling.xyz" />
    <meta property="og:description"
        content="Fingerspelling.xyz uses your webcam and machine learning to analyze your hand shapes so you can learn to sign the American Sign Language alphabet." />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="https://fingerspelling.xyz/assets/meta.png" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@hellomondaycom" />
    <meta name="twitter:creator" content="@hellomondaycom" />
    <meta name="twitter:title" content="Fingerspelling with Machine Learning" />
    <meta name="twitter:description"
        content="Fingerspelling.xyz uses your webcam and machine learning to analyze your hand shapes so you can learn to sign the American Sign Language alphabet." />
    <meta name="twitter:image" content="https://fingerspelling.xyz/assets/meta.png" />

    <meta name="theme-color" content="#ffffff" />
    <!-- <link rel="stylesheet" href="../static/css/bundle.css" />
    <link rel="stylesheet" href="../static/css/style.css"> -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/bundle.css') }}" />
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}" />
    <script>
        (function (i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r;
            (i[r] =
                i[r] ||
                function () {
                    (i[r].q = i[r].q || []).push(arguments);
                }),
                (i[r].l = 1 * new Date());
            (a = s.createElement(o)), (m = s.getElementsByTagName(o)[0]);
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m);
        })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

        ga('create', 'UA-193026365-1', { storage: 'none' });
        ga('set', 'anonymizeIp', true);
        ga('send', 'pageview');
    </script>
</head>

<body>
    <div class="left">
        <!-- <a href="about.html" style="text-decoration: none;"><h1 class="left-h1">Human Computer Interaction</h1></a> -->
        <a href="{{ url_for('about') }}" style="text-decoration: none;">
            <h1 class="right-h1">Human Computer Interaction</h1>
        </a>
        <div class="left-container">
            <div class="left-cam-box" id="left-cam-box">
                <div class="cam" id="add-cam">
                    <img src="{{ url_for('video_feed') }}" />
                </div>
            </div>
            <div class="left-words">
                <!-- <p>
                    <span id="latest_value"></span>
                </p> -->
                <div>
                    <div class="container">
                        <!-- <p class="sentence1">
                            <span id="latest_value"></span>
                            <svg id="speak_left" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                stroke-width="1.5" stroke="currentColor" class="w-6 h-6 speak">
                                <path stroke-linecap="round" stroke-linejoin="round"
                                    d="M19.114 5.636a9 9 0 010 12.728M16.463 8.288a5.25 5.25 0 010 7.424M6.75 8.25l4.72-4.72a.75.75 0 011.28.53v15.88a.75.75 0 01-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.01 9.01 0 012.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75z" />
                            </svg>
                        </p> -->



                        <div class="main-sentence main-sentence1">
                            <p class="sentence1">
                                <span id="latest_value" contenteditable="true" spellcheck="true">{{ word }}</span>
                                <svg id="speak_left" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                    stroke-width="1.5" stroke="currentColor" class="w-6 h-6 speak">
                                    <path stroke-linecap="round" stroke-linejoin="round"
                                        d="M19.114 5.636a9 9 0 010 12.728M16.463 8.288a5.25 5.25 0 010 7.424M6.75 8.25l4.72-4.72a.75.75 0 011.28.53v15.88a.75.75 0 01-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.01 9.01 0 012.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75z" />
                                </svg>
                            </p>

                            <div class="errors errors1" id="errors">
                                <div class="table-container table-container1">
                                    <table class="responsive-table responsive-table1">
                                        <thead>
                                            <tr>
                                                <th scope="col">Errors</th>
                                                <th scope="col">Suggestions</th>
                                            </tr>
                                        </thead>
                                        <tbody id="errors-table"></tbody>
                                    </table>
                                </div>
                            </div>
                        </div>










                        <div class="btn btn1">
                            <button class="open-btn open-btn1 whole-left">Show All Gestures</button>
                        </div>
                        <div class="popup popup1">
                            <div class="popup-overlay popup-overlay1"></div>
                            <div class="main-popup main-popup1">
                                <div class="popup-content popup-content1">
                                    <span class="close-btn close-btn1">&times;</span>
                                    <div class="entire-box1">
                                        <div class="blank"></div>
                                        <div class="img-content">
                                            <!-- <div class="num">
                                                <img src="../static/img/right/num.jfif" alt="num">
                                            </div> -->
                                            <div class="alpha">
                                                <span> <span> A </span> <img src="../static/img/left/a.png"
                                                        alt="A"></span>
                                                <span> <span> B </span> <img src="../static/img/left/b.png"
                                                        alt="B"></span>
                                                <span> <span> C </span> <img src="../static/img/left/c.png"
                                                        alt="C"></span>
                                                <span> <span> D </span> <img src="../static/img/left/d.png"
                                                        alt="D"></span>
                                                <span> <span> E </span> <img src="../static/img/left/e.png"
                                                        alt="E"></span>
                                                <span> <span> F </span> <img src="../static/img/left/f.png"
                                                        alt="F"></span>
                                                <span> <span> G </span> <img src="../static/img/left/g.png"
                                                        alt="G"></span>
                                                <span> <span> H </span> <img src="../static/img/left/h.png"
                                                        alt="H"></span>
                                                <span> <span> I </span> <img src="../static/img/left/i.png"
                                                        alt="I"></span>
                                                <span> <span> J </span> <img src="../static/img/left/j.png"
                                                        alt="J"></span>
                                                <span> <span> K </span> <img src="../static/img/left/k.png"
                                                        alt="K"></span>
                                                <span> <span> L </span> <img src="../static/img/left/l.png"
                                                        alt="L"></span>
                                                <span> <span> M </span> <img src="../static/img/left/m.png"
                                                        alt="M"></span>
                                                <span> <span> N </span> <img src="../static/img/left/n.png"
                                                        alt="N"></span>
                                                <span> <span> O </span> <img src="../static/img/left/o.png"
                                                        alt="O"></span>
                                                <span> <span> P </span> <img src="../static/img/left/p.png"
                                                        alt="P"></span>
                                                <span> <span> Q </span> <img src="../static/img/left/q.png"
                                                        alt="Q"></span>
                                                <span> <span> R </span> <img src="../static/img/left/r.png"
                                                        alt="R"></span>
                                                <span> <span> S </span> <img src="../static/img/left/s.png"
                                                        alt="S"></span>
                                                <span> <span> T </span> <img src="../static/img/left/t.png"
                                                        alt="T"></span>
                                                <span> <span> U </span> <img src="../static/img/left/u.png"
                                                        alt="U"></span>
                                                <span> <span> V </span> <img src="../static/img/left/v.png"
                                                        alt="V"></span>
                                                <span> <span> W </span> <img src="../static/img/left/w.png"
                                                        alt="W"></span>
                                                <span> <span> X </span> <img src="../static/img/left/x.png"
                                                        alt="X"></span>
                                                <span> <span> Y </span> <img src="../static/img/left/y.png"
                                                        alt="Y"></span>
                                                <span> <span> Z </span> <img src="../static/img/left/z.png"
                                                        alt="Z"></span>
                                                <span> <span> Bs </span> <img src="../static/img/left/bs.png"
                                                        alt="Bs"></span>
                                                <span> <span> Space </span> <img src="../static/img/left/space.png"
                                                        alt="Space"></span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


</body>
<script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils@0.1/camera_utils.js" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/@mediapipe/control_utils@0.1/control_utils.js"
    crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils@0.1/drawing_utils.js"
    crossorigin="anonymous"></script>

<script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands@0.1.1614621970/hands.js" crossorigin="anonymous"></script>

<script src="//www.youtube.com/iframe_api"></script>
<!-- <script src="../static/js/index_left.js"></script> -->
<script src="{{ url_for('static', filename='js/index_left.js') }}"></script>
<script>


    function getSuggestion(str) {
        let res = "";
        for (let i = 0; i < str.length; i++) {
            if (str[i] == ',') res += ' ';
            else res += str[i];
        }
        return res;
    }

    let err = document.getElementById('errors');
    err.style.display = "none";



    var latest = document.getElementById("latest_value");
    var xhr = new XMLHttpRequest();
    xhr.open('GET', '{{ url_for("stream") }}');
    xhr.onreadystatechange = function () {
        var all_lines = xhr.responseText.split('\n');
        last_line = all_lines.length - 2;
        latest.textContent = all_lines[last_line];
    }
    xhr.send();

    // 1st API 
    setInterval(() => {
        let options = {
            method: 'POST',
            headers: {
                'content-type': 'application/json',
                'X-RapidAPI-Key': '9ff800dbd3msh33c2555e9d61efep18060ejsn0510dae021e2',
                'X-RapidAPI-Host': 'jspell-checker.p.rapidapi.com'
            },
            body: `{"language":"enUS","fieldvalues":"${latest.textContent}","config":{"forceUpperCase":false,"ignoreIrregularCaps":false,"ignoreFirstCaps":true,"ignoreNumbers":true,"ignoreUpper":false,"ignoreDouble":false,"ignoreWordsWithNumbers":true}}`
        };

        fetch('https://jspell-checker.p.rapidapi.com/check', options)
            .then((response) => response.json())
            .then(response => {
                console.log(response);
                console.log(response.elements[0].errors);
                console.log(response.elements[0].errors[0].suggestions);
                err.style.display = "block";

                let table = document.getElementById('errors-table');
                table.innerHTML = "";
                for (let i = 0; i < response.elements[0].errors.length; i++) {
                    let str = response.elements[0].errors[i].suggestions.toString();
                    table.innerHTML += `
                        <tr>
                            <th scope="row">${response.elements[0].errors[i].word}</th>
                            <td data-title="Released">${getSuggestion(str)}</td>
                        </tr>
                    `;
                }
            })
            .catch((err) => console.error(err));
    }, 10000);


    // 2nd API
    // setInterval(()=> {
    //     var myHeaders = new Headers();
    //     myHeaders.append("apikey", "4QfVYhmFvcttCsbizRyBGRSlLSjQjozm");
    //     var requestOptions = {
    //         method: 'GET',
    //         redirect: 'follow',
    //         headers: myHeaders
    //     };
    //     fetch(`https://api.apilayer.com/spell/spellchecker?q=${latest.textContent}`, requestOptions)
    //         .then(response => response.json())
    //         .then(result => {
    //             console.log(result);
    //             console.log("res", result);
    //             err.style.display = "block";
    //             let table = document.getElementById('errors-table');
    //             table.innerHTML = "";
    //             for (let i = 0; i < result.corrections.length; i++) {
    //                 let str = result.corrections[i].candidates.toString();
    //                 table.innerHTML += `
    //                 <tr>
    //                     <th scope="row">${result.corrections[i].text}</th>
    //                     <td data-title="Released">${getSuggestion(str)}</td>
    //                 </tr>
    //                 `;
    //                 console.log(str);
    //             }
    //         })
    //         .catch(error => console.log('error', error));
    // }, 10000);

</script>

</html>